(this["webpackJsonpreact-ros-robot"]=this["webpackJsonpreact-ros-robot"]||[]).push([[0],{49:function(e,t,n){},50:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var o=n(1),c=n.n(o),s=n(26),i=n.n(s),a=(n(49),n(50),n(0)),r=n(2),l=n(4),O=n(3),h=n(66),j=n(70),u=n(69),b=n(6),d=function(e){Object(l.a)(n,e);var t=Object(O.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return Object(b.jsx)(h.a,{children:Object(b.jsx)(j.a,{bg:"light",expand:"lg",children:Object(b.jsxs)(h.a,{children:[Object(b.jsx)(j.a.Brand,{href:"#home",children:"React-Bootstrap"}),Object(b.jsx)(j.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(b.jsx)(j.a.Collapse,{id:"basic-navbar-nav",children:Object(b.jsxs)(u.a,{className:"me-auto",children:[Object(b.jsx)(u.a.Link,{href:"/",children:"Home"}),Object(b.jsx)(u.a.Link,{href:"/about",children:"About"})]})})]})})})}}]),n}(o.Component),R=function(e){Object(l.a)(n,e);var t=Object(O.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return Object(b.jsx)(h.a,{className:"text-center",children:Object(b.jsx)("h1",{children:"Dietrich Kruse \xa9 2021"})})}}]),n}(o.Component),v=n(42),E=n(11),_=n(44),m={ROSBRIDGE_SERVER_IP:"192.168.86.129",ROSBRIDGE_SERVER_PORT:"9090",RECONNECTION_TIMER:3e3,CMD_VEL_TOPIC:"/cmd_vel",POSE_TOPIC:"/amcl_pose",POSE_MSG_TYPE:"geometry_msgs/PoseWithCovarianceStamped",ODOM_TOPIC:"/odom",ODOM_MSG_TYPE:"nav_msgs/Odometry"},p=n(12),x=n(41),S=function(e){Object(l.a)(n,e);var t=Object(O.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).state={ros:null},e.init_connection(),e.handleMove=e.handleMove.bind(Object(p.a)(e)),e.handleStop=e.handleStop.bind(Object(p.a)(e)),e}return Object(r.a)(n,[{key:"init_connection",value:function(){var e=this;this.state.ros=new window.ROSLIB.Ros,console.log(this.state.ros),this.state.ros.on("connection",(function(){console.log("connection established in Teleop!"),e.setState({connected:!0})})),this.state.ros.on("close",(function(){console.log("connection closed!"),e.setState({connected:!1}),setTimeout((function(){try{e.state.ros.connect("ws://"+m.ROSBRIDGE_SERVER_IP+":"+m.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("connection problem")}}),m.RECONNECTION_TIMER)}));try{this.state.ros.connect("ws://"+m.ROSBRIDGE_SERVER_IP+":"+m.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("connection problem")}}},{key:"handleMove",value:function(e){console.log("handle move");var t=new window.ROSLIB.Topic({ros:this.state.ros,name:m.CMD_VEL_TOPIC,messageType:"geometry_msgs/Twist"}),n=new window.ROSLIB.Message({linear:{x:e.y/50,y:0,z:0},angular:{x:0,y:0,z:-e.x/50}});t.publish(n)}},{key:"handleStop",value:function(e){console.log("handle stop");var t=new window.ROSLIB.Topic({ros:this.state.ros,name:m.CMD_VEL_TOPIC,messageType:"geometry_msgs/Twist"}),n=new window.ROSLIB.Message({linear:{x:0,y:0,z:0},angular:{x:0,y:0,z:0}});t.publish(n)}},{key:"render",value:function(){return Object(b.jsx)("div",{children:Object(b.jsx)(x.Joystick,{size:100,baseColor:"#EEEEEE",stickColor:"#BBBBBB",move:this.handleMove,stop:this.handleStop})})}}]),n}(o.Component),w=function(e){Object(l.a)(n,e);var t=Object(O.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).state={connected:!1,ros:null},e.init_connection(),e}return Object(r.a)(n,[{key:"init_connection",value:function(){var e=this;this.state.ros=new window.ROSLIB.Ros,console.log(this.state.ros),this.state.ros.on("connection",(function(){console.log("connection established!"),e.setState({connected:!0})})),this.state.ros.on("close",(function(){console.log("connection closed!"),e.setState({connected:!1}),setTimeout((function(){try{e.state.ros.connect("ws://"+m.ROSBRIDGE_SERVER_IP+":"+m.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("connection problem")}}),m.RECONNECTION_TIMER)}));try{this.state.ros.connect("ws://"+m.ROSBRIDGE_SERVER_IP+":"+m.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("connection problem")}}},{key:"render",value:function(){return Object(b.jsx)(_.a,{className:"text-center m-3",variant:this.state.connected?"success":"danger",children:this.state.connected?"Robot Connected":"Robot Disconnected"})}}]),n}(o.Component),f=n(67),y=n(68),g=n(37),I=function(e){Object(l.a)(n,e);var t=Object(O.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).state={ros:null,x:0,y:0,orientation:0,linear_velocity:0,angular_velocity:0},e.init_connection(),e}return Object(r.a)(n,[{key:"init_connection",value:function(){var e=this;this.state.ros=new window.ROSLIB.Ros,console.log(this.state.ros),this.state.ros.on("connection",(function(){console.log("connection established!"),e.setState({connected:!0})})),this.state.ros.on("close",(function(){console.log("connection closed!"),e.setState({connected:!1}),setTimeout((function(){try{e.state.ros.connect("ws://"+m.ROSBRIDGE_SERVER_IP+":"+m.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("connection problem")}}),m.RECONNECTION_TIMER)}));try{this.state.ros.connect("ws://"+m.ROSBRIDGE_SERVER_IP+":"+m.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("connection problem")}}},{key:"componentDidMount",value:function(){this.getRobotState()}},{key:"getRobotState",value:function(){var e=this;new window.ROSLIB.Topic({ros:this.state.ros,name:m.POSE_TOPIC,messageType:m.POSE_MSG_TYPE}).subscribe((function(t){e.setState({x:t.pose.pose.position.x.toFixed(2)}),e.setState({y:t.pose.pose.position.y.toFixed(2)}),e.setState({orientation:e.getOrientationFromQuaternion(t.pose.pose.orientation).toFixed(2)})})),new window.ROSLIB.Topic({ros:this.state.ros,name:m.ODOM_TOPIC,messageType:m.ODOM_MSG_TYPE}).subscribe((function(t){e.setState({linear_velocity:t.twist.twist.linear.x.toFixed(2)}),e.setState({angular_velocity:t.twist.twist.angular.z.toFixed(2)})}))}},{key:"getOrientationFromQuaternion",value:function(e){var t=new g.b(e.x,e.y,e.z,e.w);return(new g.a).setFromQuaternion(t)._z*(180/Math.PI)}},{key:"render",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)(f.a,{children:Object(b.jsxs)(y.a,{children:[Object(b.jsx)("h4",{className:"mt-4",children:"Position"}),Object(b.jsxs)("p",{className:"mt-0",children:["x: ",this.state.x]}),Object(b.jsxs)("p",{className:"mt-0",children:["y: ",this.state.y]}),Object(b.jsxs)("p",{className:"mt-0",children:["Orientation: ",this.state.orientation]})]})}),Object(b.jsx)(f.a,{children:Object(b.jsxs)(y.a,{children:[Object(b.jsx)("h4",{className:"mt-4",children:"Velocities"}),Object(b.jsxs)("p",{className:"mt-0",children:["Linear Velocity: ",this.state.linear_velocity]}),Object(b.jsxs)("p",{className:"mt-0",children:["Angular Velocity: ",this.state.angular_velocity]})]})})]})}}]),n}(o.Component),T=function(e){Object(l.a)(n,e);var t=Object(O.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).state={ros:null},e.view_map=e.view_map.bind(Object(p.a)(e)),e}return Object(r.a)(n,[{key:"init_connection",value:function(){var e=this;this.state.ros=new window.ROSLIB.Ros,console.log(this.state.ros),this.state.ros.on("connection",(function(){console.log("connection established!"),e.setState({connected:!0})})),this.state.ros.on("close",(function(){console.log("connection closed!"),e.setState({connected:!1}),setTimeout((function(){try{e.state.ros.connect("ws://"+m.ROSBRIDGE_SERVER_IP+":"+m.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("connection problem")}}),m.RECONNECTION_TIMER)}));try{this.state.ros.connect("ws://"+m.ROSBRIDGE_SERVER_IP+":"+m.ROSBRIDGE_SERVER_PORT)}catch(t){console.log("connection problem")}}},{key:"componentDidMount",value:function(){this.init_connection(),this.view_map()}},{key:"view_map",value:function(){var e=new window.ROS2D.Viewer({divID:"nav_div",width:640,height:480});new window.NAV2D.OccupancyGridClientNav({ros:this.state.ros,rootObject:e.scene,viewer:e,serverName:"/move_base",withOrientation:!0})}},{key:"render",value:function(){return Object(b.jsx)("div",{children:Object(b.jsx)("div",{id:"nav_div",children:"Viewer"})})}}]),n}(o.Component),P=function(e){Object(l.a)(n,e);var t=Object(O.a)(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={},e}return Object(r.a)(n,[{key:"render",value:function(){return Object(b.jsx)("div",{children:Object(b.jsxs)(h.a,{children:[Object(b.jsx)("h1",{className:"text-center mt-3",children:"Robot Control Page"}),Object(b.jsx)(f.a,{children:Object(b.jsx)(y.a,{children:Object(b.jsx)(w,{})})}),Object(b.jsx)(f.a,{children:Object(b.jsx)(y.a,{children:Object(b.jsx)(S,{})})}),Object(b.jsxs)(f.a,{children:[Object(b.jsx)(y.a,{children:Object(b.jsx)(I,{})}),Object(b.jsxs)(y.a,{children:[Object(b.jsx)("h1",{children:"MAP"}),Object(b.jsx)(T,{})]})]})]})})}}]),n}(o.Component),C=function(e){Object(l.a)(n,e);var t=Object(O.a)(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={},e}return Object(r.a)(n,[{key:"render",value:function(){return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"About"}),Object(b.jsx)("p",{children:"This react app controls and monitors ROS-enabled robots through a Web Interface"})]})}}]),n}(o.Component),B=function(e){Object(l.a)(n,e);var t=Object(O.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return Object(b.jsx)(h.a,{children:Object(b.jsx)(v.a,{children:Object(b.jsxs)(E.c,{children:[Object(b.jsx)(E.a,{path:"/",exact:!0,component:P}),Object(b.jsx)(E.a,{path:"/about",exact:!0,component:C})]})})})}}]),n}(o.Component);var D=function(){return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(d,{}),Object(b.jsx)(B,{}),Object(b.jsx)(R,{})]})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,71)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),o(e),c(e),s(e),i(e)}))};i.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(D,{})}),document.getElementById("root")),N()}},[[64,1,2]]]);
//# sourceMappingURL=main.2bd116e6.chunk.js.map